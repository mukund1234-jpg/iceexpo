{% extends "base.html" %}

{% block content %}
<div class="container-fluid p-2">
    <div class="row">
        <!-- LEFT SIDE: Upload & Webcam -->
        <div class="col-md-6 mb-2">


            {% include 'ocr/webcam_capture.html' %}
       
        </div>
    </div>
</div>

<!-- Webcam JS -->
<script>
    const video = document.getElementById('webcam');
    const canvas = document.getElementById('canvas');
    const webcamForm = document.getElementById('webcam-form');

    navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
            video.srcObject = stream;
        })
        .catch(err => {
            console.error("Webcam access denied:", err);
        });

    function captureImage() {
        const context = canvas.getContext('2d');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        context.drawImage(video, 0, 0);
        const dataURL = canvas.toDataURL('image/jpeg');
        document.getElementById('webcam-image').value = dataURL;
        webcamForm.submit();
    }
</script>
{% endblock %}
